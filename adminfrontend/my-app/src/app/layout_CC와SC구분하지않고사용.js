"use client";

import "./globals.css";
import Link from "next/link";
import { useEffect, useState } from "react";


// // metadata ëŠ” ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ ì‘ë™ 
//   export const metadata = {
//     title: "STO PROJECT",
//     description: "Generated by create next app",
//   };

export default function RootLayout({ children }) {
  const [topics, setTopics] = useState([]);

  useEffect(() => {
    // ì„œë²„ ê²½ë¡œë¥¼ ë„£ì–´ì„œ, ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸°(fetching)
    fetch("http://localhost:9999/topics") 
      .then((resp) => resp.json()) // ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ 'json' í˜•ì‹ìœ¼ë¡œ ë³€í™˜
      .then((result) => {
        setTopics(result);
      });
  });

  return (
    <html>
      <body>
        <h1>
          {" "}
          <Link href="/"> [layout ì—ì„œ ì‘ì„±] home ìœ¼ë¡œ ì´ë™ </Link>{" "}
        </h1>

        <ol>
            {/* <li> <a href='/read/1' > html ìƒì„¸ ë¡œ ì´ë™ </a>   </li> */}
            {/* <li>
              {" "}
              <Link href="/read/1"> html ìƒì„¸ ë¡œ ì´ë™ </Link>{" "}
            </li>
            <li>
              {" "}
              <Link href="/read/2"> css ìƒì„¸ ë¡œ ì´ë™</Link>{" "}
            </li> */}

          {/* ë™ì ìœ¼ë¡œ Link ìƒì„±í•˜ê¸° */}
          {topics.map( (topic) => {
            return <li key={topic.id}> <Link href={`/read/${topic.id}`} >  {topic.title}  </Link> </li>
          } )

          }


        </ol>

        <ul>
          <li>
            {" "}
            <Link href="/create"> Create </Link>{" "}
          </li>
          <li>
            {" "}
            <Link href="/update"> Update </Link>{" "}
          </li>
          <li>
            {" "}
            <input type="button" value="delete" />{" "}
          </li>
        </ul>

        {/* page.js ì—ì„œ ì í˜€ì§„ê²Œ, children ì„ íƒ€ê³  ì˜´ | ë‹¤ë§Œ, ì–´ë””ì„œ ì˜¤ëŠ”ê±´ì§€ëŠ” ë¶ˆëª…í™• ğŸ˜¥   */}
        {children}
      </body>
    </html>
  );
}
