import { Control } from "./Control";
import "./globals.css";
import Link from "next/link";

// metadata ëŠ” ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ ì‘ë™
export const metadata = {
  title: "STO PROJECT",
  description: "Generated by create next app",
};

export default async function RootLayout({ children }) {
  // ì„œë²„ ê²½ë¡œë¥¼ ë„£ì–´ì„œ, ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸°(fetching)
  const res = await fetch(process.env.NEXT_PUBLIC_API_URL + 'topics', {
    // next: { revalidate: 10 },  // 10ì´ˆ ê°„ë§Œ cache ìœ ì§€, 10ì´ˆ ì´í›„ fresh data ê°€ì ¸ì˜¤ê³  ë‹¤ì‹œ cache ì €ì¥
    // next: { revalidate: 0 },   // ìºì‰¬ë¥¼ ì“°ì§€ ì•Šê² ë‹¤.
    cache: "no-store", // ìºì‰¬ë¥¼ ì“°ì§€ ì•Šê² ë‹¤.
  });

  const topics = await res.json();

  return (
    <html>
      <body>
        <h1>
          {" "}
          <Link href="/"> home ìœ¼ë¡œ ì´ë™ </Link>{" "}
        </h1>

        <ol>
          {/* <li> <a href='/read/1' > html ìƒì„¸ ë¡œ ì´ë™ </a>   </li> */}
          {/* <li>
              {" "}
              <Link href="/read/1"> html ìƒì„¸ ë¡œ ì´ë™ </Link>{" "}
            </li>
            <li>
              {" "}
              <Link href="/read/2"> css ìƒì„¸ ë¡œ ì´ë™</Link>{" "}
            </li> */}

          {/* ë™ì ìœ¼ë¡œ Link ìƒì„±í•˜ê¸° */}
          {topics.map((topic) => {
            return (
              <li key={topic.id}>
                {" "}
                <Link href={`/read/${topic.id}`}> {topic.title} </Link>{" "}
              </li>
            );
          })}
        </ol>  

        <Control />

        <br></br>
        <br></br>
        <br></br>

          <Link href = {"/admin/main"} > ğŸš€ğŸš€ğŸš€ ì–´ë“œë¯¼ í˜ì´ì§€ ì´ë™ </Link>

        {/* page.js ì—ì„œ ì í˜€ì§„ê²Œ, children ì„ íƒ€ê³  ì˜´ | ë‹¤ë§Œ, ì–´ë””ì„œ ì˜¤ëŠ”ê±´ì§€ëŠ” ë¶ˆëª…í™• ğŸ˜¥   */}
        {children}

        
      </body>
    </html>
  );
}
